"use strict";(self.webpackChunkdocsam=self.webpackChunkdocsam||[]).push([[4126],{5063:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>a});var l=s(5893),o=s(1151);const r={slug:"first-blog-post",title:"Linux\u642d\u5efaWeb\u670d\u52a1\u5668",authors:{name:"Sam",title:"--",url:"https://github.com/wgao19",image_url:"https://blogs7245-1256587996.cos.ap-guangzhou.myqcloud.com/img/EUse-pic-0000109.png"},tags:["Nginx","Linux"]},i=void 0,t={permalink:"/docucomp/blog/first-blog-post",editUrl:"https://github.com/S7245/docucomp/tree/main/blog/2023-10-30-first-blog-post.md",source:"@site/blog/2023-10-30-first-blog-post.md",title:"Linux\u642d\u5efaWeb\u670d\u52a1\u5668",description:"gcc",date:"2023-10-30T00:00:00.000Z",formattedDate:"October 30, 2023",tags:[{label:"Nginx",permalink:"/docucomp/blog/tags/nginx"},{label:"Linux",permalink:"/docucomp/blog/tags/linux"}],readingTime:6.135,hasTruncateMarker:!1,authors:[{name:"Sam",title:"--",url:"https://github.com/wgao19",image_url:"https://blogs7245-1256587996.cos.ap-guangzhou.myqcloud.com/img/EUse-pic-0000109.png",imageURL:"https://blogs7245-1256587996.cos.ap-guangzhou.myqcloud.com/img/EUse-pic-0000109.png"}],frontMatter:{slug:"first-blog-post",title:"Linux\u642d\u5efaWeb\u670d\u52a1\u5668",authors:{name:"Sam",title:"--",url:"https://github.com/wgao19",image_url:"https://blogs7245-1256587996.cos.ap-guangzhou.myqcloud.com/img/EUse-pic-0000109.png",imageURL:"https://blogs7245-1256587996.cos.ap-guangzhou.myqcloud.com/img/EUse-pic-0000109.png"},tags:["Nginx","Linux"]},unlisted:!1,prevItem:{title:"\u4e00\u6c5f\u6625\u6c34\u5411\u4e1c\u6d41-\u4efb\u6b63\u975e",permalink:"/docucomp/blog/huawei-blog-post"},nextItem:{title:"Welcome",permalink:"/docucomp/blog/welcome"}},c={authorsImageUrls:[void 0]},a=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"Nginx\u914d\u7f6e",id:"nginx\u914d\u7f6e",level:2},{value:"OpenSSL \u66f4\u65b0\u7248\u672c",id:"openssl-\u66f4\u65b0\u7248\u672c",level:2},{value:"\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u5b89\u88c5\u4e86openssl",id:"\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u5b89\u88c5\u4e86openssl",level:2},{value:"\u91cd\u65b0\u5b89\u88c5openssl",id:"\u91cd\u65b0\u5b89\u88c5openssl",level:2},{value:"\u57fa\u7840\u547d\u4ee4",id:"\u57fa\u7840\u547d\u4ee4",level:2},{value:"\u7cfb\u7edf\u547d\u4ee4",id:"\u7cfb\u7edf\u547d\u4ee4",level:3},{value:"CentOS \u5b89\u88c5\u529f\u80fd",id:"centos-\u5b89\u88c5\u529f\u80fd",level:2},{value:"\u628anodejs\u90e8\u7f72\u5230centos",id:"\u628anodejs\u90e8\u7f72\u5230centos",level:3}];function d(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://ftp.gnu.org/gnu/glibc/",children:"gcc"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,l.jsx)(e.p,{children:"\u5b89\u88c5\u73af\u5883\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"yum -y install gcc \nyum -y install zlib zlib-devel \nyum -y install pcre pcre-devel\nyum -y install openssl openssl-devel\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:"https://nginx.org/en/download.html",children:"nginx"})," \u627e\u5230",(0,l.jsx)(e.code,{children:"Mainline version"}),"\u67e5\u770b\u7248\u672c\uff0c\u4e0a\u4f20\u5230\u670d\u52a1\u5668\uff1a",(0,l.jsx)(e.code,{children:"/usr/local/"}),"\uff0c"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"cd /usr/local/\nwget https://nginx.org/download/nginx-1.25.3.tar.gz\n\n# \u89e3\u538b\ntar -zxvf nginx-1.25.3.tar.gz\n\n# \u628a nginx-1.25.3 \u6587\u4ef6\u540d\u6539\u4e3a\uff1a nginx\n\n# \u7f16\u8bd1\u524d\u68c0\u67e5\u547d\u4ee4\n./configure --prefix=/usr/local/nginx\n# \u7f16\u8bd1\nmake & make install\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u67e5\u770b\u6587\u4ef6\uff1a",(0,l.jsx)(e.code,{children:"ls -l"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"[root@iZwz9gsb21uph8o66szfkcZ nginx]# ls -l\n\u603b\u7528\u91cf 880\ndrwxr-xr-x 6   1001 1001   4096 10\u6708 30 16:33 auto\n-rw-r--r-- 1   1001 1001 325032 10\u6708 24 21:46 CHANGES\n-rw-r--r-- 1   1001 1001 497029 10\u6708 24 21:46 CHANGES.ru\ndrwx------ 2 nobody root   4096 10\u6708 30 16:43 client_body_temp\ndrwxr-xr-x 2   1001 1001   4096 10\u6708 30 16:33 conf\n-rwxr-xr-x 1   1001 1001   2611 10\u6708 24 21:46 configure\ndrwxr-xr-x 4   1001 1001   4096 10\u6708 30 16:33 contrib\ndrwx------ 2 nobody root   4096 10\u6708 30 16:43 fastcgi_temp\ndrwxr-xr-x 2   1001 1001   4096 10\u6708 30 16:33 html\n-rw-r--r-- 1   1001 1001   1397 10\u6708 24 21:46 LICENSE\ndrwxr-xr-x 2 root   root   4096 10\u6708 30 16:47 logs\n-rw-r--r-- 1 root   root    438 10\u6708 30 16:34 Makefile\ndrwxr-xr-x 2   1001 1001   4096 10\u6708 30 16:33 man\ndrwxr-xr-x 3 root   root   4096 10\u6708 30 16:43 objs\ndrwx------ 2 nobody root   4096 10\u6708 30 16:43 proxy_temp\n-rw-r--r-- 1   1001 1001     49 10\u6708 24 21:46 README\ndrwxr-xr-x 2 root   root   4096 10\u6708 30 16:43 sbin    <===== \u7f16\u8bd1\u540e\u7684\u6587\u4ef6\ndrwx------ 2 nobody root   4096 10\u6708 30 16:43 scgi_temp\ndrwxr-xr-x 9   1001 1001   4096 10\u6708 30 16:33 src\ndrwx------ 2 nobody root   4096 10\u6708 30 16:43 uwsgi_temp\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u521b\u5efa ",(0,l.jsx)(e.code,{children:"logs"})," \u6587\u4ef6\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"cd /usr/local/nginx\nmkdir logs\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u64cd\u4f5c\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"cd /usr/local/nginx/sbin\n\n# \u542f\u52a8 nginx\n./nginx\n\n# \u5173\u95ed nginx\n./nginx -s stop\n\n# \u91cd\u542f\n./nginx -s reload\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5f00\u673a\u542f\u52a8 nginx\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"vim /etc/rc.local\n# \u6700\u5e95\u90e8\u589e\u52a0\u8fd9\u4e00\u884c\n/usr/local/nginx/sbin/nginx\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u542f\u52a8\u540e\u67e5\u770b\u8fdb\u7a0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"# \u67e5\u8be2\u8fdb\u7a0b\u53f7\nps -ef|grep nginx\n\n# \u505c\u6b62\u8fdb\u7a0b\nkill -QUIT \u8fdb\u7a0b\u53f7\n\n# \u5feb\u901f\u505c\u6b62\nkill -TERM \u4e3b\u8fdb\u7a0b\u53f7\n\n# \u5f3a\u5236\u505c\u6b62\nkill -9 \u4e3b\u8fdb\u7a0b\u53f7\n"})}),"\n",(0,l.jsx)(e.p,{children:"QA\uff1a80\u7aef\u53e3\u88ab\u5360\u7528\uff0c\u9700\u8981\u89e3\u9664"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"# \u67e5\u770b\u7aef\u53e3\nnetstat -ntlp\n"})}),"\n",(0,l.jsx)(e.h2,{id:"nginx\u914d\u7f6e",children:"Nginx\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    server {\n        listen       80;\n        server_name  localhost;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n\n        #error_page  404              /404.html;\n\n        # redirect server error pages to the static page /50x.html\n        #\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n\n        # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n        #\n        #location ~ \\.php$ {\n        #    proxy_pass   http://127.0.0.1;\n        #}\n\n        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n        #\n        #location ~ \\.php$ {\n        #    root           html;\n        #    fastcgi_pass   127.0.0.1:9000;\n        #    fastcgi_index  index.php;\n        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n        #    include        fastcgi_params;\n        #}\n\n        # deny access to .htaccess files, if Apache's document root\n        # concurs with nginx's one\n        #\n        #location ~ /\\.ht {\n        #    deny  all;\n        #}\n    }\n\n\n    # another virtual host using mix of IP-, name-, and port-based configuration\n    #\n    #server {\n    #    listen       8000;\n    #    listen       somename:8080;\n    #    server_name  somename  alias  another.alias;\n\n    #    location / {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n\n\n    # HTTPS server\n    #\n    #server {\n    #    listen       443 ssl;\n    #    server_name  localhost;\n\n    #    ssl_certificate      cert.pem;\n    #    ssl_certificate_key  cert.key;\n\n    #    ssl_session_cache    shared:SSL:1m;\n    #    ssl_session_timeout  5m;\n\n    #    ssl_ciphers  HIGH:!aNULL:!MD5;\n    #    ssl_prefer_server_ciphers  on;\n\n    #    location / {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n\n}\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Please use python3.11 or python3.10 or python3.9 or python3.8 or python3.7 or python3.6.\n"})}),"\n",(0,l.jsx)(e.h2,{id:"openssl-\u66f4\u65b0\u7248\u672c",children:"OpenSSL \u66f4\u65b0\u7248\u672c"}),"\n",(0,l.jsxs)(e.p,{children:["\u67e5\u770b\u7248\u672c\u4ee5\u53ca\u76ee\u5f55\uff1a",(0,l.jsx)(e.code,{children:"openssl version -a"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:'OpenSSL 1.0.2k-fips  26 Jan 2017\nbuilt on: reproducible build, date unspecified\nplatform: linux-x86_64\noptions:  bn(64,64) md2(int) rc4(16x,int) des(idx,cisc,16,int) idea(int) blowfish(idx) \ncompiler: gcc -I. -I.. -I../include  -fPIC -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -DKRB5_MIT -m64 -DL_ENDIAN -Wall -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches   -m64 -mtune=generic -Wa,--noexecstack -DPURIFY -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5 -DOPENSSL_BN_ASM_GF2m -DRC4_ASM -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DVPAES_ASM -DBSAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM -DECP_NISTZ256_ASM\nOPENSSLDIR: "/etc/pki/tls"\nengines:  rdrand dynamic \n'})}),"\n",(0,l.jsxs)(e.p,{children:["\u4ece",(0,l.jsx)(e.a,{href:"https://www.openssl.org/source/",children:"\u5b98\u7f51"}),"\u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\uff0c\u4e0a\u4f20\u5230Linux\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"# \u89e3\u538b\ntar -xvf openssl-1.1.1w.tar\n\n# \u5b89\u88c5\u4f9d\u8d56\nyum -y install gcc* \n\n# \u6267\u884c\u6587\u4ef6\u5b89\u88c5\u8def\u5f84\n./config --prefix=/opt/openssl --openssldir=/usr/local/openssl\n\nmake & make install \n\n# \u5907\u4efd\nwhereis openssl \n\n# openssl: /usr/bin/openssl /usr/lib64/openssl /usr/include/openssl /usr/local/openssl /opt/openssl/bin/openssl /usr/share/man/man1/openssl.1ssl.gz\n\nmv /usr/bin/openssl /usr/bin/openssl.old\nmv /usr/include/openssl /usr/include/openssl.old\n\n# \u7528\u65b0\u7684\u6587\u4ef6\u66ff\u6362\u65e7\u7684\u6587\u4ef6\npwd \n# /usr/local/openssl-1.1.1w\n\nln -sf /usr/local/openssl-1.1.1w/bin/openssl /usr/bin/openssl\nln -s /usr/local/openssl-1.1.1w/include/openssl /usr/include/openssl\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u5b89\u88c5\u4e86openssl",children:"\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u5b89\u88c5\u4e86openssl"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"rpm -qa | grep openssl\n\n# openssl-libs-1.0.2k-26.el7_9.x86_64\n# openssl-1.0.2k-26.el7_9.x86_64\n# openssl-devel-1.0.2k-26.el7_9.x86_64\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5",(0,l.jsx)(e.code,{children:"libssl.so.1.1"}),"\u6587\u4ef6\u662f\u5426\u5b58\u5728\u4e8e\u7cfb\u7edf\u8def\u5f84\u4e2d\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:'find / -name "libssl.so.1.1" 2>/dev/null\n\n# /usr/local/openssl/lib/libssl.so.1.1\n# /opt/openssl/lib/libssl.so.1.1\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u4fdd\u5b58\u5e76\u9000\u51fa\u540e\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f\u914d\u7f6e\u751f\u6548\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"source /etc/profile\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u91cd\u65b0\u5b89\u88c5openssl",children:"\u91cd\u65b0\u5b89\u88c5openssl"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"# \u5378\u8f7d\u65e7\u7248\u672c\u7684openssl\nsudo yum remove openssl\n\n# \u5b89\u88c5\u65b0\u7248\u672c\u7684openssl\uff1a\nsudo yum install openssl\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://blog.csdn.net/weixin_45447587/article/details/128852767",children:"Linux Openssl\u5347\u7ea7\uff08\u8be6\uff09"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:'wget https://npm.taobao.org/mirrors/node/v12.4.0/node-v12.4.0-linux-x64.tar.xz\ntar -xvf node-v12.4.0-linux-x64.tar.xz\nls -l\npwd\nmv node-v12.4.0-linux-x64/ /usr/local/node\necho "export PATH=$PATH:/usr/local/node/bin" >> /etc/profile\nsource /etc/profile\nnode -v\nnpm -v\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u57fa\u7840\u547d\u4ee4",children:"\u57fa\u7840\u547d\u4ee4"}),"\n",(0,l.jsx)(e.h3,{id:"\u7cfb\u7edf\u547d\u4ee4",children:"\u7cfb\u7edf\u547d\u4ee4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"> cat /etc/redhat-release\nCentOS Linux release 7.9.2009 (Core)\n\n> uname -m\nx86_64\n\n> uname -r\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"centos idealTree:lib: sill idealTree buildDeps\n"})}),"\n",(0,l.jsxs)(e.p,{children:["CentOS7 \u4e2d\u6267\u884c ",(0,l.jsx)(e.code,{children:"npm install -g pm2"})," \u5361\u6b7b\u4e0d\u52a8\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"# \u67e5\u770b\u955c\u50cf\u662f\u5426\u5b89\u88c5\uff0c\n> npm config get registry\n\n> npm cache clean --force\n\n> npm config set registry https://registry.npmmirror.com\n\n> \n"})}),"\n",(0,l.jsx)(e.h2,{id:"centos-\u5b89\u88c5\u529f\u80fd",children:"CentOS \u5b89\u88c5\u529f\u80fd"}),"\n",(0,l.jsx)(e.h3,{id:"\u628anodejs\u90e8\u7f72\u5230centos",children:"\u628anodejs\u90e8\u7f72\u5230centos"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:'> sudo yum install nodejs\n> sudo yum install npm -y\n> npm -v\n> node -v\n\n# \u5b89\u88c5 pm2 \n> npm cache clean --force\n> npm config set registry https://registry.npmmirror.com\n> npm config get registry\n> npm install -g pm2\n\n# \u65b0\u5efa college nodejs \u9879\u76ee\u76ee\u5f55\n# \u628a\u9879\u76ee\u540c\u6b65\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\n> cd /usr/local/src/app-nodejs/college\n> pm2 start app.js --name "/usr/local/src/app-nodejs/college"\n\n# \u5f00\u653e\u7aef\u53e3\n> service firewalld stop\n> firewall-cmd --zone=public --list-ports\n> firewall-cmd --add-port=3001/tcp --permanent\n> firewall-cmd --zone=public --list-ports\n> service firewalld restart\n\n# \u5982\u679c\u662f\u963f\u91cc\u4e91\u670d\u52a1\uff0c\u9700\u8981\u5230\u5728 \u5b89\u5168\u7ec4 \u4e2d\u5f00\u653e\u7aef\u53e3\u3002\n'})})]})}function p(n={}){const{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}},1151:(n,e,s)=>{s.d(e,{Z:()=>t,a:()=>i});var l=s(7294);const o={},r=l.createContext(o);function i(n){const e=l.useContext(r);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);